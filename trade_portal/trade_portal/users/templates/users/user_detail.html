{% extends "base.html" %}
{% load static %}

{% block title %}My Profile{% endblock %}

{% block breadcrumbs %}
  <li class="breadcrumb-item active" aria-current="page">My Profile</li>
{% endblock %}

{% block content %}
<div class="content-box profile">
  <h1 class="page-title">{{ current_org.name }}</h1>
  <div class="profile-row">
    <div class="row">
      <div class="col-md-3">
        <h2 class="subtitle">Identity</h2>
      </div>
      <div class="col-md-9 profile-row__content">
        <div class="row mb-3">
          <div class="col-md-3">ABN</div>
          <div class="col-md-9"><a href="https://abr.business.gov.au/ABN/View?abn={{ current_org.business_id }}" target="_blank">{{ current_org.business_id }}</a></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">Domain name:</div>
          <div class="col-md-9"><a href="//{{ current_org.dot_separated_id }}" target="_blank">{{ current_org.dot_separated_id }}</a></div>
        </div>
        <div class="row">
          <div class="col-md-3">Verified:</div>
          <div class="col-md-9"><img src="{% static 'images/MyGovID_logo.svg' %}" alt=""></div>
        </div>
      </div>
    </div>
  </div>

  <div class="profile-row">
    <div class="row">
      <div class="col-md-3">
        <h2 class="subtitle">Authorised Roles</h2>
      </div>
      <div class="col-md-9 profile-row__content">
        <div class="row mb-3 user-row">
          <div class="col-md-3 user-row__name">AU Business (default):</div>
          <div class="col-md-9 user-row__content"><strong>Verified <i class="icon icon-check-circle"></i></strong> <button type="button" class="btn btn-sm btn-outline-white btn-add-user-document">+ Add document</button></div>
        </div>
        <div class="row mb-3 user-row">
          <div class="col-md-3 user-row__name">Certification Authority:</div>
          <div class="col-md-9 user-row__content">
            <strong>Verified <i class="icon icon-check-circle"></i></strong> <button type="button" class="btn btn-sm btn-outline-white btn-add-user-document">+ Add document</button>
          </div>
          <div class="col">
            <p class="authorised-roles__description">
              Preferential Certificates of Origin<br/>
              Non-Preferential Certificates of Origin
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="profile-row">
    <div class="row">
      <div class="col-md-3">
        <h2 class="subtitle">IGL API Access</h2>
      </div>
      <div class="col-md-9 profile-row__content">
        <button type="button" class="btn btn-md btn-primary btn-profile-create-key">Create A Key</button>
        <div class="card card--key">
          <div class="card-header">
            <div class="igl-api-access-key">8WgbLik5EbdtJY4OWm2ZQ0tH…</div>
            <button type="button" class="btn btn-sm btn-outline-white btn-profile-regenerate-key"><i class="icon icon-refresh"></i>Regenerate this key</button>
          </div>
          <div class="card-body">
            <div class="card-title">Scope</div>
            <p class="card-text">Consignment references</p>
          </div>
        </div>
        <div class="card card--key">
          <div class="card-header">
            <div class="igl-api-access-key">8WgbLik5EbdtJY4OWm2ZQ0tH…</div>
            <button type="button" class="btn btn-sm btn-outline-white btn-profile-regenerate-key"><i class="icon icon-refresh"></i>Regenerate this key</button>
          </div>
          <div class="card-body">
            <div class="card-title">Scope</div>
            <p class="card-text">Consignment references</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="form-actions form-actions--bordered">
    <button type="submit" class="btn btn-primary">Save</button>
  </div>


  <br/><br/>
  <div>
    {% if not user.is_staff %}
      You are member of the next organisatons:<br/>
      <ul>
        {% for ms in user.orgmembership_set.all %}
          <li><strong>{{ ms.org }}</strong>: {{ ms.get_role_display }} (since {{ ms.since }})</li>
        {% empty %}
          <li>(None)</li>
        {% endfor %}
      </ul>
    {% else %}
      You are staff member and already have access to all organisations.
    {% endif %}
  </div>
  <div>To become a member of a new one - please login with the method supporting organisation assignment or request a staff member to assign them manually.</div>

<div class="form-actions">
  <a class="btn btn-primary" href="{% url 'users:update' %}" role="button">Change my info</a>
  <a class="btn btn-primary" href="{% url 'account_email' %}" role="button">E-Mail management</a>
  <a class="btn btn-primary" href="{% url 'account_change_password' %}" role="button">Change password</a>
</div>
</div>
{% endblock content %}
