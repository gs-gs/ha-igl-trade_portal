<!doctype html>
<html lang="en" class="h-100">

{% load static %}

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>{% block head_title %}Trade Portal{% endblock %}</title>

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    {% block extra_head %}{% endblock %}
  </head>

  <body class="d-flex flex-column h-100 {% block body_class %}{% endblock %}">
    <header class="header {% block header_class %}{% endblock %}">
      <a class="header__logo" href="/"><img src="{% static 'images/logo-white.svg' %}" alt="Trade Portal" class="header__logo-image" /><span class="header__logo-text">Inter-Government Ledger Trade Portal</span></a>
      <div class="header__nav">
        <div class="header__nav-actions">
          <a href="#" class="btn btn-primary header__nav-btn">Sign up</a>
          <a href="#" class="btn btn-dark header__nav-btn"><img src="{% static 'images/mygovid-logo.svg' %}" alt="" class="" /></a>
          <button class="header__menu-toggler" type="button" data-toggle="collapse" data-target="#mainMenu" aria-controls="mainMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="icon icon-menu"></span>
          </button>
        </div>
        <div class="site-nav__overlay"></div>
        <div class="collapse site-nav" id="mainMenu">
          <div class="site-nav__header">
            <button class="site-nav__close" type="button" data-toggle="collapse" data-target="#mainMenu" aria-controls="mainMenu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="icon icon-close"></span>
            </button>
          </div>
          <ul class="site-nav__list">
            <li class="site-nav__item"> {#  active #}
              <a class="site-nav__item-link" href="/">Home</a>
            </li>
            {% if not request.user.is_authenticated %}
            <li class="site-nav__item">
              <a class="site-nav__item-link" href="/accounts/login/">Login</a>
            </li>
            {% else %}
            <li class="site-nav__item">
              <a class="site-nav__item-link" href="{% url 'documents:list' %}">Documents</a>
            </li>
            {% if request.user.is_staff %}
            <li class="site-nav__item">
              <a class="site-nav__item-link" href="/admin/" target="_new">Admin</a>
            </li>
            {% endif %}
            <li class="site-nav__item">
              <a class="site-nav__item-link" href="/logout/">Logout</a>
            </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'documents:list' %}">Documents</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'documents:parties' %}">Parties</a>
              </li>
              {% if request.user.is_staff %}
                <li class="nav-item">
                  <a class="nav-link" href="/admin/" target="_new">Admin</a>
                </li>
              {% endif %}
              <li class="nav-item">
                <a class="nav-link" href="/logout/">Logout</a>
              </li>
            {% endif %}
            {% if request.user.is_authenticated %}
            <li class="site-nav__item">
              <a class="site-nav__item-link" href="/profile/">{{ user }}</a>
            </li>
            {% endif %}
          </ul>

          <form class="form-inline mt-2 mt-md-0" action="{% url 'users:change-org' %}?next={{ request.path_info }}" id='id-current-org-form' method="POST">
            {% csrf_token %}
            {% if user.orgs %}
              <span style="color: white">Acting as
                <select class="form-control mr-sm-2" onChange="$('#id-current-org-form').submit()" name="current_org">
                  {% for org in user.orgs %}
                    <option value="{{ org.pk }}" {% if org.id == current_org.id %}selected{% endif %}>{{ org }}</option>
                  {% endfor %}
                </select>
              </span>
            {% else %}
              {% if user.is_staff %}
                <span style="color: white">Staff member</span>
              {% endif %}
            {% endif %}
          </form>
        </div>
      </div>
    </header>

    <!-- Begin page content -->
    <main role="main" class="flex-shrink-0">
      {% if messages %}
        {% for message in messages %}
          <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true" class="ml-3">&times;</span></button>
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}

      {% block content %}{% endblock %}

    </main>

    <footer class="footer mt-auto">
      <div class="footer__logo">
        <img src="{% static 'images/footer-logo.png' %}" alt="">
      </div>
      <div class="footer-menu footer__menu">
        <ul class="footer-menu__list">
          <li class="footer-menu__item"><a href="#" class="footer-menu__item-link">Who we are</a></li>
          <li class="footer-menu__item"><a href="#" class="footer-menu__item-link">Our Ministers</a></li>
          <li class="footer-menu__item"><a href="#" class="footer-menu__item-link">Careers</a></li>
          <li class="footer-menu__item"><a href="#" class="footer-menu__item-link">About us</a></li>
          <li class="footer-menu__item"><a href="#" class="footer-menu__item-link">Contact us</a></li>
        </ul>
      </div>
      <div class="footer__copyright"><p class="footer__copyright-text">Copyright Department of Home Affairs &copy; 2020</p></div>
    </footer>
    <script src="{% static 'js/scripts.js' %}"></script>
    {% block extra_script %}{% endblock %}
  </body>
</html>
